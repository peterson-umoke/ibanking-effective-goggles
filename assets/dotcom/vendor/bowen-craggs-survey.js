var JSSurvey={target:document.getElementsByTagName("body")[0],pageCounter:0,init:function(){var e=JSSurvey.readCookie("JSSCounter"),t=JSSurvey.getSearchParameter();if(t.bctestmode)switch(t.bctestmode){case"0":JSSurvey.writeCookie("JSStestmode",0,"/");break;default:JSSurvey.writeCookie("JSStestmode",1,"/")}""!=e?(JSSurvey.pageCounter=parseInt(e),JSSurvey.pageCounter=JSSurvey.pageCounter+1,JSSurvey.writeCookie("JSSCounter",JSSurvey.pageCounter,"/")):JSSurvey.writeCookie("JSSCounter",0,"/"),1==JSSsettings.survey.feedback.active&&JSSurvey.feedBackLink();var r;if(JSSurvey.isTestMode()||JSSurvey.pageCounter>=JSSsettings.survey.surveys.counter){for(i=0;i<JSSurls.length;i++){var d=JSSurls[i];0==document.location.href.indexOf(d[0])&&(r=d)}!r&&JSSurvey.isTestMode()&&(r=JSSurls[0]),r&&"object"==typeof r[1]&&JSSurvey.modal(r)}},randomNum:function(e){return Math.floor(Math.random()*e)},feedBackLink:function(){var e=0;if("decline"==JSSurvey.readCookie("feedback")&&(e=1),0==e){var t=JSSsettings.survey.feedback,r=document.createElement("div");r.id="JSSFB";var d=document.createElement("a");switch(d.id="JSSFeedBack",d.href=t.url,d.onclick=function(){return"new"==t.presentation?JSSurvey.openURL({url:this,winName:"win",chrome:"width="+t.windowWidth+",height="+t.windowHeight+",resizable="+t.windowResize+",scrollbars="+t.windowScrolling+",menubar="+t.windowMenu+",status="+t.windowStatus+",location="+t.windowLocation}):document.location.href=this,!1},r.style.position="fixed",-1!=navigator.appVersion.indexOf("MSIE 6.")&&(r.style.position="absolute"),r.style.float="left",r.style.width="auto",r.style.outline="0",t.alignment){case 1:r.style.top="0",r.style.left="0";break;case 2:r.style.top="0",r.style.right="0";break;case 3:r.style.bottom="0",r.style.right="0";break;case 4:r.style.bottom="0",r.style.left="0";break;default:r.style.bottom="0",r.style.left="0"}var o=document.createElement("a");if(o.id="JSSClose",o.href="#",o.innerHTML="x",o.style.position="absolute",o.style.right="0",o.style.top="0",o.style.display="block",o.style.float="right",o.style.outline="none",o.style.background="url(bc-survey/JSSclose.png) top left no-repeat",o.style.width="11px",o.style.height="10px",o.style.textIndent="-500em",o.onclick=function(){JSSurvey.target.removeChild(document.getElementById("JSSFB")),JSSurvey.writeCookie("JSSfeedback","decline","/",t.expiry)},1==t.type)d.style.fontFamily=t.font,d.style.fontSize=t.fontSize,d.style.color=t.color,d.style.textDecoration=t.underline,d.style.background=t.background,d.style.padding=t.padding,d.style.display="block",d.style.float="left",d.style.width="auto",d.appendChild(document.createTextNode(t.text));else{var a=document.createElement("img");a.src=t.image,a.border="0",d.appendChild(a)}var n=!1,s=JSSsettings.survey.surveys.feedbackHtml;if(void 0!=s&&null!=s){var i=new XMLHttpRequest;i.open("GET",s,!1),i.send(null);var u=i.responseText;void 0!=u&&null!=u&&(n=!0)}if(n){r.innerHTML=u;var _=JSSurvey.getElementsByTagName(r,"style");void 0!=_[0]&&(JSSurvey.addCss(_[0].innerHTML),r.removeChild(_[0])),r.style.fontFamily=t.font,r.style.fontSize=t.fontSize,r.style.color=t.color,r.style.background=t.background,r.style.padding=t.padding,r.style.display="block",r.style.float="left",r.style.width="auto";var l=JSSurvey.getElementsByClassName(r,"survey-yes");void 0!=l&&null!=l&&(l[0].href=d.href,l[0].onclick=d.onclick,l[0].style.textDecoration=t.underline);var S=JSSurvey.getElementsByClassName(r,"survey-no");void 0!=S&&null!=S&&(S[0].href=o.href,S[0].onclick=o.onclick,S[0].style.textDecoration=t.underline)}else r.appendChild(d),r.appendChild(o);JSSurvey.target.appendChild(r)}},modal:function(s){function action(){void 0!=typeof __s[1].trapfocus&&"0"==__s[1].trapfocus||JSSurvey.target.appendChild(__d),JSSurvey.target.appendChild(__dM),__modal.mWindow.autocenter&&(__dM.style.marginLeft=__dM.offsetWidth/2*-1+"px",__dM.style.marginTop=__dM.offsetHeight/2*-1+"px"),JSSurvey.callback()}var __s=s,__u=__s[0];__u=__u.split("://"),__u=__u[1],__u=__u.split("/");var __path="/",__uL=__u.length;for(i=1;i<__uL;i++)__path+=__u[i],__path+="/";__path=__path.replace("//","/");var __design=__s[1].design,__modal=eval("JSSsettings.survey."+__design),__doNotDisturb=0,__cookieName=__s[1].name,__no=JSSurvey.readCookie(__cookieName+"No");""!=__no&&(__no=parseInt(__no))>=__s[1].frequency&&(__doNotDisturb=1);var __yes=JSSurvey.readCookie(__cookieName+"Yes");if("1"==__yes&&(__doNotDisturb=1),JSSurvey.isTestMode()||0==__doNotDisturb){var _rand=JSSurvey.randomNum(__s[1].ratio);if(JSSurvey.isTestMode()||0==_rand){var modalcss="",__d=document.createElement("div");__d.id="JSOverlay",modalcss+="#JSOverlay { position: fixed; top: 0; left: 0; height: 100%; width: 100%; z-index: 999; "+JSSurvey.addCssAttribute("background-color",__modal.background.color)+JSSurvey.addCssAttribute("opacity",parseInt(__modal.background.opacity)/100)+JSSurvey.addCssAttribute("filter","alpha(opacity="+__modal.background.opacity+")")+" }\n";var __dM=document.createElement("div");__dM.id="JSQuestion",__dM.className="survey-modal";var bg;bg=void 0!=__modal.mWindow.backgroundImage&&__modal.mWindow.backgroundImage.length>0?__modal.mWindow.backgroundImage:__modal.mWindow.background;var __width=parseInt(__modal.mWindow.width),__height=parseInt(__modal.mWindow.height);if(__height)var mt="-"+__height/2+"px";if(__width)var ml="-"+__width/2+"px";modalcss+="#JSQuestion { position: fixed; top: 50%; left: 50%; z-index: 1000; "+JSSurvey.addCssAttribute("width",__modal.mWindow.width)+JSSurvey.addCssAttribute("height",__modal.mWindow.height)+JSSurvey.addCssAttribute("border",__modal.mWindow.border)+JSSurvey.addCssAttribute("background",bg)+JSSurvey.addCssAttribute("margin-top",mt)+JSSurvey.addCssAttribute("margin-left",ml)+" }\n";var __dI=document.createElement("div");__dI.className="survey-inner";var innerpadding=16;if(modalcss+="#JSQuestion .survey-inner { "+JSSurvey.addCssAttribute("padding",innerpadding+"px")+"}\n",void 0!==__modal.logo&&__modal.logo.url.length>0){var __dL=document.createElement("div");__dL.className="survey-logo";var __dLI=document.createElement("img");__dLI.src=__modal.logo.url,modalcss+="#JSQuestion .survey-logo { float: left; margin-right: 8px; margin-bottom: 8px; "+JSSurvey.addCssAttribute("margin-top",-1*innerpadding+"px")+JSSurvey.addCssAttribute("margin-left",-1*innerpadding+"px")+JSSurvey.addCssAttribute("width",__modal.logo.width)+JSSurvey.addCssAttribute("height",__modal.logo.height)+" }\n",__dL.appendChild(__dLI),__dI.appendChild(__dL)}var __dH=document.createElement("div");if(__dH.className="survey-header",__dH.background=__modal.header.background,void 0!=__modal.header.text&&__modal.header.text.length>0){var __dHH=document.createElement("h2");__dHH.appendChild(document.createTextNode(__modal.header.text)),JSSurvey.isTestMode()&&__dHH.appendChild(document.createTextNode(" (testmode)")),__dH.appendChild(__dHH)}modalcss+="#JSQuestion .survey-header { "+JSSurvey.addCssAttribute("background",__modal.header.background)+" }\n",modalcss+="#JSQuestion .survey-header h2 { "+JSSurvey.addCssAttribute("padding",__modal.header.padding)+JSSurvey.addCssAttribute("margin",__modal.header.margin)+JSSurvey.addCssAttribute("font-family",__modal.header.font)+JSSurvey.addCssAttribute("font-size",__modal.header.fontSize)+JSSurvey.addCssAttribute("color",__modal.header.color)+JSSurvey.addCssAttribute("border",__modal.header.border)+" }\n";var __dQ=document.createElement("div");__dQ.className="survey-question",__dQ.style.background=__modal.question.background,__dQ.innerHTML=__modal.question.text,modalcss+="#JSQuestion .survey-question { "+JSSurvey.addCssAttribute("padding",__modal.question.padding)+JSSurvey.addCssAttribute("margin",__modal.question.margin)+JSSurvey.addCssAttribute("font-family",__modal.question.font)+JSSurvey.addCssAttribute("font-size",__modal.question.fontSize)+JSSurvey.addCssAttribute("color",__modal.question.color)+JSSurvey.addCssAttribute("border",__modal.question.border)+" }\n";var __dB=document.createElement("div");__dB.className="survey-buttons",modalcss+="#JSQuestion .survey-buttons { "+JSSurvey.addCssAttribute("clear","both")+JSSurvey.addCssAttribute("padding",__modal.answers.padding)+JSSurvey.addCssAttribute("border-top",__modal.answers.borderTop)+JSSurvey.addCssAttribute("border-bottom",__modal.answers.borderBottom)+" }\n",modalcss+='#JSQuestion .survey-buttons:after { content: ""; display: table; clear: both; }\n';var __dB1=document.createElement("a");__dB1.className="survey-no",__dB1.href="#",__dB1.innerHTML=__modal.answer1.text,modalcss+="#JSQuestion .survey-no { "+JSSurvey.addCssAttribute("background",__modal.answer1.background)+JSSurvey.addCssAttribute("padding",__modal.answer1.padding)+JSSurvey.addCssAttribute("margin",__modal.answer1.margin)+JSSurvey.addCssAttribute("font-family",__modal.answer1.font)+JSSurvey.addCssAttribute("font-size",__modal.answer1.fontSize)+JSSurvey.addCssAttribute("color",__modal.answer1.color)+JSSurvey.addCssAttribute("border",__modal.answer1.border)+JSSurvey.addCssAttribute("display","block")+JSSurvey.addCssAttribute("float","left")+JSSurvey.addCssAttribute("width","auto")+JSSurvey.addCssAttribute("text-decoration","none")+JSSurvey.addCssAttribute("font-weight","bold")+" }\n",__dB1.onclick=function(){var e=__cookieName+"No",t=JSSurvey.readCookie(e);if(""==t)t=parseInt(t),JSSurvey.writeCookie(e,1,__path,__s[1].expiry);else if((t=parseInt(t))<__s[1].frequency){var r=t+1;JSSurvey.writeCookie(e,r,__path,__s[1].expiry)}return JSSurvey.removeModal(),!1};var __dB2=document.createElement("a");__dB2.className="survey-yes",__dB2.href="#",__dB2.innerHTML=__modal.answer2.text,modalcss+="#JSQuestion .survey-yes { "+JSSurvey.addCssAttribute("background",__modal.answer2.background)+JSSurvey.addCssAttribute("padding",__modal.answer2.padding)+JSSurvey.addCssAttribute("margin",__modal.answer2.margin)+JSSurvey.addCssAttribute("font-family",__modal.answer2.font)+JSSurvey.addCssAttribute("font-size",__modal.answer2.fontSize)+JSSurvey.addCssAttribute("color",__modal.answer2.color)+JSSurvey.addCssAttribute("border",__modal.answer2.border)+JSSurvey.addCssAttribute("display","block")+JSSurvey.addCssAttribute("float","right")+JSSurvey.addCssAttribute("width","auto")+JSSurvey.addCssAttribute("text-decoration","none")+JSSurvey.addCssAttribute("font-weight","bold")+" }\n",__dB2.onclick=function(){var e=__cookieName+"Yes";JSSurvey.writeCookie(e,1,__path,__s[1].expiry);var t=__s[2].length,r="";for(i=0;i<t;i++)"url"==__s[2][i][1]?r+="&"+__s[2][i][0]+"="+document.location.href:"useragent"==__s[2][i][1]?r+="&"+__s[2][i][0]+"="+navigator.userAgent:r+="&"+__s[2][i][0]+"="+__s[2][i][1];r+=JSSurvey.getGA(__s[1].gaMetrics);var d=__s[1].surveyURL+r;if("new"==__s[1].presentation)JSSurvey.openURL({url:d,winName:"win",chrome:"width="+__s[1].windowWidth+",height="+__s[1].windowHeight+",resizable="+__s[1].windowResize+",scrollbars="+__s[1].windowScrolling+",menubar="+__s[1].windowMenu+",status="+__s[1].windowStatus+",location="+__s[1].windowLocation}),JSSurvey.removeModal();else{if("_blank"==__s[1].presentation)return this.href=d,this.target="_blank",JSSurvey.removeModal(),!0;document.location.href=d,JSSurvey.removeModal()}return!1},__dB.appendChild(__dB1),__dB.appendChild(__dB2),__dI.appendChild(__dH),__dI.appendChild(__dQ),__dI.appendChild(__dB),__dM.appendChild(__dI),JSSurvey.addCss(modalcss);var __timer=setTimeout(action,__s[1].timer)}}},removeModal:function(){var e=document.getElementById("JSOverlay");null!=e&&JSSurvey.target.removeChild(e),JSSurvey.target.removeChild(document.getElementById("JSQuestion"))},openURL:function(e){window.open(e.url,e.winName,e.chrome)},getGA:function(e){function t(e,t,r){if(!e||""==e||!t||""==t||!r||""==r)return"-";var d,o,a,n="-";return d=e.indexOf(t),a=t.indexOf("=")+1,d>-1&&(o=e.indexOf(r,d),o<0&&(o=e.length),n=e.substring(d+a,o)),n}var r=t(document.cookie,"__utmz=",";"),d="";if("-"!=r){var o=t(r,"utmcsr=","|"),a=t(r,"utmcmd=","|"),n=t(r,"utmctr=","|"),s=t(r,"utmcct=","|"),i=t(r,"utmccn=","|"),u=e.questionStart;1==e.source&&(d+="&q"+u+"="+o,u++),1==e.medium&&(d+="&q"+u+"="+a,u++),1==e.term&&(d+="&q"+u+"="+n,u++),1==e.content&&(d+="&q"+u+"="+s,u++),1==e.campaign&&(d+="&q"+u+"="+i,u++)}return d},writeCookie:function(e,t,r,d,o,a){var n=new Date;n.setTime(n.getTime()),d&&(d=1e3*d*60*60*24);var s=new Date(n.getTime()+d);document.cookie=e+"="+escape(t)+(d?";expires="+s.toGMTString():"")+(r?";path="+r:"")+(o?";domain="+o:"")+(a?";secure":"")},readCookie:function(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},isTestMode:function(){var e=JSSurvey.readCookie("JSStestmode");return!(!e||1!=e)},getSearchParameter:function(){var e=window.location.search.substr(1);return null!=e&&""!=e?JSSurvey.transformToAssocArray(e):{}},transformToAssocArray:function(e){for(var t={},r=e.split("&"),d=0;d<r.length;d++){var o=r[d].split("=");t[o[0]]=o[1]}return t},addCss:function(e){var t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.setAttribute("type","text/css"),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),t.appendChild(r)},addCssAttribute:function(e,t){return void 0==t||0==t.length?"":e+": "+t+"; "},getElementsByTagName:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):function(e,r){null==r&&(r=document);var d=r.getElementsByTagName(t);d.length;return d}(0,e)},getElementsByClassName:function(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):function(e,t){null==t&&(t=document);var r,d,o=[],a=t.getElementsByTagName("*"),n=a.length,s=new RegExp("(^|\\s)"+e+"(\\s|$)");for(r=0,d=0;r<n;r++)s.test(a[r].className)&&(o[d]=a[r],d++);return o}(t,e)},callback:function(){}},__JSSettings=JSSLocation+"bowen-craggs-settings.js",__script=document.createElement("script");__script.type="text/javascript",__script.src=__JSSettings,JSSurvey.target.appendChild(__script);